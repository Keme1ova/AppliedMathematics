import numpy as np
from scipy.optimize import linprog

# Коэффициенты целевой функции (расходы на перевозки)
c = [7, 8, 1, 2, 3, 4, 5, 7, 9, 9, 8, 6]

# Матрица коэффициентов для поставок
A_eq = [
    [1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1]
]

# Вектор правых частей для поставок (запасы в базах)
b_eq = [250, 320, 150]

# Матрица коэффициентов для спроса (поставки в магазины)
A_ub = [
    [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
    [0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0],
    [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0],
    [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1]
]

# Вектор правых частей для спроса (требуемые поставки в магазинах)
b_ub = [210, 190, 260, 60]

# Границы переменных (неотрицательные поставки)
bounds = [(0, None)] * 12

# Вызов симплекс-метода для минимизации
result = linprog(c, A_eq=A_eq, b_eq=b_eq, A_ub=A_ub, b_ub=b_ub, bounds=bounds, method='highs')

# Вывод результата
print("Оптимальный план перевозок:")
print(np.round(result.x.reshape(3, 4), 2))
print("Минимальные расходы:", result.fun)
